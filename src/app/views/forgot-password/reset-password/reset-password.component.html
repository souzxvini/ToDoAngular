
<div class="background-image">
  <div class="centralize">
    <div class="form">
      <div>
        <h1 class="tittle">Reset your password!</h1>
      <form #myForm="ngForm" [formGroup]="form" class="reset-password-form" (ngSubmit)="confirmNewPassword()">
        <mat-form-field class="example-full-width mt-1" >
          <mat-label >E-mail</mat-label>
          <input matInput formControlName="email" >
        </mat-form-field>

        <mat-form-field class="example-full-width mt-1">
          <mat-label>New password</mat-label>
          <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password">
          <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
            <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
        </mat-form-field>

        <div class="text-start">
          <p class="requirements">The password MUST have at least...</p>
          <div >
            <p *ngIf="form.get('password')?.errors?.['noSpecialCharacter']" class="wrong-requirements">
              <mat-icon>help_outline</mat-icon> One special character
            </p>
            <p *ngIf="!form.get('password')?.errors?.['noSpecialCharacter']" class="correct-requirements">
              <mat-icon>done</mat-icon> One special character
            </p>

            <p *ngIf="form.get('password')?.errors?.['noNumberCharacter']"  class="wrong-requirements ">
              <mat-icon>help_outline</mat-icon> One number.
            </p>
            <p *ngIf="!form.get('password')?.errors?.['noNumberCharacter']"  class="correct-requirements">
              <mat-icon>done</mat-icon> One number.
            </p>

            <p *ngIf="form.get('password')?.errors?.['noUppercaseCharacter']"  class="wrong-requirements ">
              <mat-icon>help_outline</mat-icon> One uppercase character.
            </p>
            <p *ngIf="!form.get('password')?.errors?.['noUppercaseCharacter']"  class="correct-requirements">
              <mat-icon>done</mat-icon> One uppercase character.
            </p>

            <p *ngIf="form.get('password')?.errors?.['noLowercaseCharacter']"  class="wrong-requirements ">
              <mat-icon>help_outline</mat-icon> One lowercase character.
            </p>
            <p *ngIf="!form.get('password')?.errors?.['noLowercaseCharacter']"  class="correct-requirements">
              <mat-icon>done</mat-icon>Must have at least One lowercase character.
            </p>

            <p *ngIf="form.get('password')?.errors?.['minLength6Error']" class="wrong-requirements ">
              <mat-icon>help_outline</mat-icon> 6 characters.
            </p>
            <p *ngIf="!form.get('password')?.errors?.['minLength6Error']" class="correct-requirements">
              <mat-icon>done</mat-icon> 6 characters.
            </p>
          </div>

        </div>


        <app-message
        *ngIf="form.errors?.['diferentPassword'] &&
        form.get('passwordConfirm')?.touched"
        message="This password doesn't match the first one! " class="text-start">
        </app-message>

        <mat-form-field class="example-full-width ">
          <mat-label>Confirm the password</mat-label>
          <input matInput [type]="hidePasswordConfirm ? 'password' : 'text'" formControlName="passwordConfirm">
          <button mat-icon-button matSuffix (click)="hidePasswordConfirm = !hidePasswordConfirm" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePasswordConfirm">
            <mat-icon>{{hidePasswordConfirm ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
        </mat-form-field>

        <app-message *ngIf="form.get('code')?.errors?.['minlength'] &&
          form.get('code')?.touched"
          message="The code must have 6 digits!" class="text-start">
        </app-message>

        <mat-form-field class="example-full-width mt-1" >
          <mat-label >6 Digit Confirmation Code</mat-label>
          <input matInput formControlName="code" maxlength="6" minlength="6">
        </mat-form-field>

        <div class="row">
          <div class="col-12 md-auto mt-1">
          <button class="button" mat-raised-button color="primary" [disabled]="form.invalid">CONFIRM</button>
          </div>
        </div>

        <mat-divider class="mt-1"></mat-divider>

        <div class="mt-2">
          <p>Go back to <a class="links" [routerLink]="['/login']" >login!</a></p>
       </div>

      </form>
      </div>
    </div>
  </div>
</div>
